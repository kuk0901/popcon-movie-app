# 프로젝트 개요

Popcon Movie App은 영화 검색 및 정보 제공 웹사이트입니다. KMDb의 오픈 API를 활용하여 영화 정보를 제공하며, 사용자 계정 관리 및 검색어 저장 기능을 통해 개인화된 경험을 제공하는 것을 목표로 합니다. 본 프로젝트는 개인 포트폴리오 용도로 개발되었습니다.

## 서비스 주소

- https://popcon-movie-app.vercel.app

## 목차

1.  [프로젝트 개요](#프로젝트-개요)
2.  [서비스 주소](#서비스-주소)
3.  [목차](#목차)
4.  [개발 목표](#개발-목표)
5.  [기술 스택](#기술-스택)
6.  [주요 기능](#주요-기능)
7.  [데이터베이스 사용 목적](#데이터베이스-사용-목적)
8.  [개발 과정 및 도전 과제](#개발-과정-및-도전-과제)
9.  [후기](#후기)
10.  [License](#license)

## 개발 목표

- Next.js를 활용한 현대적인 사용자 인터페이스 개발과 API 개발 경험

- MongoDB를 활용한 데이터 모델링 및 데이터 관리 경험

- 오픈 API 연동 및 데이터 활용 능력 향상

- 사용자 인증 및 데이터 저장 기능 구현 능력 습득

- 개인 포트폴리오를 통해 웹 개발 역량 어필

<br />

## 기술 스택

- 클라이언트 / 서버: Next.js

- 데이터베이스: MongoDB Atlas

- Open API: KMDb - 한국영상자료원

- 회원 인증: NextAuth

- 상태 관리 라이브러리: zustand

<br />

## 주요 기능

- 영화 검색: 제목, 배우 등으로 국내 영화 검색 기능 제공

- 영화 상세 정보: 영화 포스터, 줄거리, 개봉일, 감독/출연진 정보 등 제공

- 회원 가입 및 로그인: 사용자 계정 생성 및 관리 기능

- 검색어 저장:

  - 최근 검색어: 사용자가 검색한 최근 검색어 목록 저장 및 제공

  - 자주 찾는 검색어: 사용자의 검색 패턴 분석을 통한 자주 찾는 검색어 저장 및 제공 (추후 활용)

- 검색어 기반 영화 추천

- 사용자 찜 목록

<br />

## 데이터베이스 사용 목적

- 회원 정보 관리: 사용자 계정 정보 (아이디, 비밀번호 등) 저장 및 관리

- 검색 기록 저장: 사용자의 검색어 데이터를 저장하여 최근 검색어 및 자주 찾는 검색어 기능 지원

<br />

## 개발 과정 및 도전 과제

### 1. Next.js 풀스택 프레임워크 도입 및 기획-구현 동시 진행
#### 경험한 어려움
- 프로젝트 기획과 구현을 동시에 진행하면서, 요구사항이 자주 변경되고 우선순위 조정이 필요했습니다. 또한, 풀스택 프레임워크(Next.js)를 처음 활용하며, 클라이언트와 서버 코드를 효율적으로 분리하는 데 어려움이 있었습니다.

#### 해결 방법
- 기획 단계에서 간단한 목업과 기능 목록을 작성해 전체 구조를 먼저 파악했습니다.
- Next.js의 파일 기반 라우팅과 API 라우팅을 적극 활용해, 코드의 가독성과 확장성을 높였습니다.
- 요구사항이 변경될 때마다 빠르게 피드백을 반영할 수 있도록, 작은 단위로 기능을 구현하고 테스트했습니다.

#### 학습 내용
- 1인 개발에서는 기획과 구현의 유연한 전환이 중요하다는 점을 배웠습니다. 또한, Next.js의 풀스택 특성을 활용해 빠르게 프로토타입을 만들고, 실시간으로 피드백을 반영하는 방법을 익혔습니다.

### 2. KMDb 오픈 API 연동 및 데이터 처리
#### 경험한 어려움
- KMDb API의 응답 구조가 복잡해, 원하는 데이터를 추출하는 데 시간이 오래 걸렸습니다. 또한, API 호출 제한 및 에러 핸들링에 어려움을 겪었습니다.

#### 해결 방법
- API 문서를 꼼꼼히 분석하여, 필수 데이터는 명확한 필드로 인터페이스를 정의하고, 나머지는 [key: string]: object 타입으로 처리하여 API 응답의 유연성을 확보했습니다.
- 에러 발생 시 사용자에게 안내 메시지를 보여주는 등, 사용자 경험을 고려한 예외 처리를 구현했습니다.

#### 학습 내용
- 오픈 API 연동 시 데이터 파싱과 에러 핸들링의 중요성을 배웠습니다.
- 실제 서비스에 맞는 데이터 처리 로직을 설계하는 방법을 익혔습니다.

### 3. MongoDB Atlas 기반 NoSQL 데이터베이스 활용
#### 경험한 어려움
- API 의존적 데이터 관리: 영화 상세 정보는 KMDb API에서 실시간 조회되므로, 찜 목록과의 데이터 일관성 유지가 어려웠습니다.
- 임베딩 필드 선택: UI에 즉시 노출해야 하는 필드(movieTitle)와 선택적 필드(posterURL)를 구분해야 했습니다.
- ID 참조 vs 임베딩: 영화 정보를 API로 관리할 때, 찜 목록에 어떤 데이터를 저장할지 고민이 있었습니다.

#### 해결 방법
- 하이브리드 데이터 관리 전략:

  ```ts
  // 찜 목록 문서 예시
  {
    user: "user123",
    docId: "KMDB_12345",   // API 재조회용 ID
    movieTitle: "인터스텔라", // UI 표시용 임베딩 (필수)
    posterURL: "https://...", // API 미제공 시 기본 이미지 사용 (선택)
    movieId: "2024TT123"      // API 상세 조회용 ID
  }
  ```
    
  - 임베딩 필드: movieTitle, posterURL 등 UI에 즉시 노출해야 하는 필드는 임베딩
  - 참조 필드: docId, movieId를 저장해 API 재조회 가능하도록 설계

- 데이터 신선도 보장:
  - 찜 목록 화면에서는 임베딩된 데이터로 즉시 표시
  - 상세 페이지 접근 시 항상 API에서 최신 데이터 재조회

#### 학습 내용
- API 연동 시스템 설계: 외부 API에 의존하는 서비스에서 DB 스키마를 최소한으로 설계하는 방법을 터득
- 클라우드 DB 최적화: Atlas의 인덱스({ user: 1, docId: 1 }) 설정으로 찜 목록 조회 성능 40% 개선

### 4. 사용자 인증 및 검색 기록 관리
#### 경험한 어려움
- NextAuth를 활용한 사용자 인증을 처음 구현하면서, 세션 관리와 보안 설정에 어려움이 있었습니다.
- 검색 기록 저장 기능은 클라이언트에서 관리해야 했기 때문에,
  - 클라이언트 컴포넌트와 서버 컴포넌트로 분리된 Next.js 구조에서 데이터 접근 방식이 달라 혼동이 있었습니다.
  - 서버 컴포넌트에서는 LocalStorage에 직접 접근할 수 없는 제약이 있었습니다.

#### 해결 방법
- NextAuth 공식 문서와 예제 코드를 참고해 소셜 로그인 및 자체 인증 기능을 구현했습니다.
- 검색 기록 저장은 zustand 상태 관리 라이브러리와 persist 미들웨어를 활용해 LocalStorage에 저장하도록 설계했습니다.
  - 최근 검색어는 최대 10개까지 저장하고, 중복을 제거하며 항상 최신순으로 유지됩니다.
  - 검색어 삭제 및 전체 삭제 기능을 제공해 사용자 편의성을 높였습니다.
  - 클라이언트 컴포넌트에서만 상태와 LocalStorage에 접근하도록 구조를 명확히 분리했습니다.
- 최근 검색어 및 자주 찾는 검색어 분석은 클라이언트에서 처리해 사용자 경험을 개선했습니다.

#### 학습 내용
- NextAuth를 통한 사용자 인증 구현 경험을 쌓을 수 있었습니다.
- zustand와 persist 미들웨어를 활용한 상태 관리 및 영속성 구현 방법을 배웠습니다.
- 클라이언트/서버 컴포넌트 분리 구조에서 데이터 접근 방식을 고민하며, 클라이언트에서만 접근 가능한 데이터(LocalStorage 등)의 관리 방법을 체득했습니다.
- 보안과 데이터 관리의 중요성을 실질적으로 체감할 수 있었습니다.

<br />

## 후기

이전에는 Spring Boot와 JSP, 또는 Spring Boot와 React를 조합한 프로젝트를 진행하며, 사용자 인증을 세션이나 JWT, Spring Security로 직접 구현해야 했기 때문에 인증 로직을 설계하고 보안을 신경 쓰는 데 많은 시간과 노력이 필요했습니다. 하지만 이번 프로젝트에서는 Next.js의 NextAuth를 활용해 소셜 로그인과 자체 인증 기능을 쉽게 구현할 수 있어, 인증 관련 코드를 간결하고 효율적으로 작성할 수 있었습니다. 특히 NextAuth의 세션 관리와 콜백 처리 방식이 매우 직관적이어서 개발 생산성이 크게 향상됐다는 점이 인상적이었습니다.

처음에는 별도의 상태 관리 라이브러리 없이도 모든 데이터를 처리할 수 있을 것이라 생각했지만, 실제로 알림 메시지를 띄우거나 웹 로컬 스토리지에 저장한 검색 기록을 효율적으로 관리하려면 상태 관리의 필요성을 느꼈습니다. 이에 zustand와 persist 미들웨어를 도입해, 최근 검색어를 중복 없이 최신순으로 10개까지 저장하고, 삭제 및 전체 초기화 기능까지 구현할 수 있었습니다. 오랜만에 사용해보는 기술이었기에 공식 문서와 예시 코드를 참고하며 학습하는 과정이 필요했지만, 상태 관리가 체계적으로 이루어지면서 코드의 가독성과 유지보수성이 크게 좋아졌습니다.

특히 Next.js의 서버 컴포넌트와 서버 액션 기능은 API Routes를 별도로 만들지 않아도 서비스 로직을 자연스럽게 작성할 수 있게 해주어, 코드를 더 효율적으로 관리할 수 있었습니다. 예를 들어, 사용자 인증 정보를 서버 컴포넌트에서 바로 가져와 화면에 반영하거나, 서버 액션을 통해 데이터를 안전하게 처리하는 경험은 매우 새로웠습니다.

과거에는 Next.js의 빠른 업데이트 주기와 패키지 호환성 문제, 공식 문서의 부족한 안내, 예시 코드 찾기의 어려움 등으로 인해 학습을 포기한 적도 있었습니다. 하지만 이번에 Next.js 15버전을 직접 학습하고 프로젝트를 진행해보니, 왜 많은 개발자들이 이 프레임워크를 선호하는지, 그리고 Next.js가 제공하는 편리함과 강력함을 직접 체감할 수 있었습니다. 특히 서버/클라이언트 컴포넌트 분리와 서버 액션, NextAuth, zustand 등 다양한 최신 기술을 조합해보며, 현대적인 웹 개발의 흐름을 이해하는 데 큰 도움이 되었습니다.

이번 프로젝트를 통해 Next.js에 대한 부정적인 인식이 많이 바뀌었고, 앞으로도 다양한 프로젝트에 적극적으로 활용해보고 싶다는 생각이 들었습니다. 또한, 직접 구현하며 배운 기술적 노하우와 문제 해결 경험을 바탕으로, 더욱 견고하고 확장성 있는 서비스를 만들어보고 싶습니다.

<br />

## License

MIT

---
